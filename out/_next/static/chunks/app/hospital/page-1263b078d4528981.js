(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{5181:(e,s,t)=>{Promise.resolve().then(t.bind(t,138))},138:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155),r=t(2115),c=t(8736),l=t.n(c);function n(e){let{placeholder:s="搜尋...",suggestions:t,onSearch:c,inputValue:n,onSuggestionClick:i}=e,[o,d]=(0,r.useState)(n),[h,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(n)},[n]);let m=e=>{d(e),c(e),u(e.length>0)},p=e=>{d(e.name),u(!1),i(e.name)};return(0,a.jsxs)("div",{className:"".concat(l().searchBar," ").concat(l().searchBar_block),children:[(0,a.jsx)("input",{type:"text",placeholder:s,value:n,onChange:e=>m(e.target.value),onBlur:()=>setTimeout(()=>u(!1),200)}),o&&(0,a.jsx)("button",{className:l().clearButton,onClick:()=>m(""),children:"清除"}),h&&t.length>0&&(0,a.jsx)("ul",{className:l().suggestionsList,children:t.map(e=>(0,a.jsxs)("li",{className:l().item,onClick:()=>p(e),onMouseDown:e=>e.preventDefault(),children:[(0,a.jsx)("div",{children:e.name}),e.address&&(0,a.jsx)("div",{className:l().address,children:e.address})]},e.id))})]})}function i(){let e="https://docs.google.com/spreadsheets/d/".concat("1R7f8svVrq0GlGr6k4RxQ4lHLzaxyJCsy8-mh6cBMtRs","/export?format=csv"),[s,t]=(0,r.useState)(!0),[c,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[d,h]=(0,r.useState)([]),[u,m]=(0,r.useState)("全部"),[p,x]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=()=>{window.scrollY>100?o(!0):o(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,r.useEffect)(()=>{(async()=>{try{let s=await fetch(e);if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=(await s.text()).split("\n").map(e=>e.trim().split(",").map(e=>e.replace(/\r/g,""))).filter(e=>e.length>1),r=a[0],c=a.slice(1).map(e=>r.reduce((s,t,a)=>(s[t]=e[a]?e[a].trim():"",s),{}));h(c),t(!1)}catch(e){e instanceof Error?(console.error("資料獲取錯誤: ".concat(e.message)),l(e)):(console.error("未知錯誤: ".concat(String(e))),l(Error("未知錯誤"))),t(!1)}})()},[e]);let _=(0,r.useMemo)(()=>{let e=[...new Set(d.map(e=>e.district))].reduce((e,s)=>{let t=d.filter(e=>e.district===s&&""!==e.name.trim()).length;return e[s]=t,e},{});return{全部:Object.values(e).reduce((e,s)=>e+s,0),...e}},[d]),j=(0,r.useMemo)(()=>d.filter(e=>{let s="全部"===u||e.district===u,t=""===p||e.name.toLowerCase().includes(p.toLowerCase())||e.address.toLowerCase().includes(p.toLowerCase()),a=""!==e.name.trim();return s&&t&&a}),[u,p,d]),w=e=>{x(""),m(e)},g=e=>{let s,t="";if("達爾文動物醫院"===e)s="https://www.facebook.com/darwinvmhp/",t="facebook Page";else{let a=encodeURIComponent(e);s="https://www.google.com/maps/search/?api=1&query=".concat(a),t="Google Maps"}return{url:s,text:t}};return s?(0,a.jsx)("div",{className:"container",children:"載入中..."}):c?(0,a.jsx)("div",{className:"container",children:"載入錯誤"}):(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("h1",{className:"title",id:"top",children:[(0,a.jsx)("span",{children:"陸龜小學堂"}),"醫院查尋系統"]}),(0,a.jsxs)("p",{className:"note",children:["這裡集結有在看陸龜的醫院，請大家協力更新資訊 (",(0,a.jsx)("a",{href:"https://www.facebook.com/share/p/15QW9pVTqM/",target:"_blank",children:"@ 留言回報"}),") 。",(0,a.jsx)("br",{}),"水平移動露出更多地區 (桌機可按住鍵盤 ",(0,a.jsx)("code",{className:"keyboard_key",children:"shift"})," 鍵 + 移動滑鼠滾輪)"]}),(0,a.jsx)("div",{className:"wrap-district",children:(0,a.jsx)("div",{className:"district-group",children:Object.keys(_).map(e=>(0,a.jsxs)("button",{onClick:()=>w(e),className:"button ".concat(u===e?"selected":""),disabled:0===_[e],children:[e," ",(0,a.jsx)("span",{children:_[e]})]},e))})}),(0,a.jsx)(n,{placeholder:"搜尋醫院名稱或地址...",suggestions:j,onSearch:e=>x(e),inputValue:p,onSuggestionClick:x}),(0,a.jsx)("div",{children:j.map(e=>(0,a.jsxs)("div",{className:"hospital-card",children:[(0,a.jsx)("span",{className:"hospital-district",children:e.district}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"hospital-title",children:e.name}),(0,a.jsx)("p",{className:"hospital-text",children:e.address}),(0,a.jsxs)("p",{className:"hospital-text",children:["電話：",e.phone]}),e.note&&(0,a.jsxs)("p",{className:"hospital-text",children:["備註：",e.note]}),(0,a.jsx)("button",{onClick:()=>window.open(g(e.name).url,"_blank"),children:g(e.name).text})]})]},e.id))}),i&&(0,a.jsx)("a",{className:"scroll_top",href:"#top",children:"回頂端"})]})}},8736:e=>{e.exports={searchBar:"SearchBar_searchBar__00GCP",clearButton:"SearchBar_clearButton__cAVx_",searchBar_inline:"SearchBar_searchBar_inline__FUZIb",searchBar_block:"SearchBar_searchBar_block__97M5g",suggestionsList:"SearchBar_suggestionsList__7zcAM",item:"SearchBar_item__P3a5E",address:"SearchBar_address__HErLC"}}},e=>{var s=s=>e(e.s=s);e.O(0,[619,441,517,358],()=>s(5181)),_N_E=e.O()}]);